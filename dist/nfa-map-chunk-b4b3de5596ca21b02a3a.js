(self.webpackChunknfa_map=self.webpackChunknfa_map||[]).push([[819],{1868:(e,t,n)=>{"use strict";n.r(t),n.d(t,{startMeasure:()=>y,stopMeasure:()=>h,default:()=>L});var a=n(6481),r=n(4538),o=n(5265),i=n(6834),d=n(3945);const s={},c=[];let u,f,l,m=0;function g(e){let t=e.getId();return t||(t=`measureFeature${m}`,e.setId(t),m+=1),t}function I(e,t){const n=(0,d.Yt)(t,l);let a;t instanceof o.ZP&&(a=t.getInteriorPoint().getCoordinates()),t instanceof r.Z&&(a=t.getLastCoordinate()),e.setPosition(a),e.getElement().innerHTML=n}function p(e){const t=g(e),n=document.createElement("div");n.className="ol-tooltip ol-tooltip-measure",s[t]=new a.default({element:n,offset:[0,-15],positioning:"bottom-center",stopEvent:!1}),u.addOverlay(s[t]),I(s[t],e.getGeometry())}function y(e){const t=g(e);s[t]||p(e),c[t]=e.getGeometry().on("change",(e=>I(s[t],e.target)))}function h(e=!1){c.forEach((e=>(0,i.unByKey)(e))),Object.keys(s).forEach((t=>{f.getSource().getFeatureById(t)||e&&e.getId()===t||(u.removeOverlay(s[t]),delete s[t])}))}const L={attach(e,t={}){({map:u,units:l}=e),({layer:f}=t),f.getSource().getFeatures().forEach((e=>{p(e)})),e.edit&&(e.edit.addInteractionListener("drawstart",((e,t)=>{y(t.feature)})),e.edit.addInteractionListener("drawend",((e,t)=>{h(t.feature)})),e.edit.addInteractionListener("modifystart",((e,t)=>{t.features.forEach((e=>{y(e)}))})),e.edit.addInteractionListener("modifyend",(()=>{h()})),e.edit.addInteractionListener("translatestart",((e,t)=>{t.features.forEach((e=>{y(e)}))})),e.edit.addInteractionListener("translateend",(()=>{h()})),e.edit.addInteractionListener("delete",(()=>{h()})),e.edit.addInteractionListener("disable",(()=>{h()})))}}}}]);